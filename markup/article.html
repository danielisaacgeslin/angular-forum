<div class="row">
  <div ng-class="{'col-md-9': vm.editEnabled}" class="col-xs-12">
    <article>
      <h5>Tags</h5>
      <ul>
        <li ng-repeat="(id, tag) in vm.article.tags">
          {{tag.text}} <a ng-if="vm.editEnabled" ng-click="vm.deleteTag(tag.id)">delete</a>
        </li>
      </ul>
      <h1>{{vm.editEnabled ? vm.edition.title : vm.article.title}}</h1>
      <h3>{{vm.editEnabled ? vm.edition.description : vm.article.description}}</h3>
      <p>{{vm.editEnabled ? vm.edition.body : vm.article.body}}</p>
    </article>
    <div ng-if="vm.article.id">
      <h4>Comments</h4>
      <ul>
        <li ng-repeat="(id, comment) in vm.article.comments">
          <p>
            <span>{{comment.creation_timestamp | date: 'dd/MM/y HH:mm'}} - </span>
            <strong>{{comment.text}} </strong>
            <a ng-click="vm.editComment($index, comment.id)">Edit</a>
            <a ng-click="vm.deleteComment(comment.id)">Delete</a>
            <div ng-if="vm.editableComment == $index">
              <input class="form-control" ng-model="vm.editableCommentText" type="text" />
              <button ng-click="vm.updateComment(comment.id)" class="btn btn-default">Save</button>
            </div>
          </p>
        </li>
      </ul>
      <h5>New comment</h5>
      <input class="form-control" type="text" ng-model="vm.newComment" />
      <div>
        <button ng-click="vm.saveComment()" class="btn btn-default">Add comment</button>
      </div>
    </div>
  </div>
  <div ng-if="vm.editEnabled" class="col-md-3">
    <div>
      <h5>Content</h5>
      <label>Title</label>
      <input class="form-control" type="text" ng-model="vm.edition.title"/>
      <label>Description</label>
      <input class="form-control" type="text" ng-model="vm.edition.description"/>
      <label>Body</label>
      <textarea class="form-control" ng-model="vm.edition.body"></textarea>
      <button ng-click="vm.saveArticle()" class="btn btn-primary">Save</button>
    </div>
    <div>
      <h5>Tags</h5>
      <select ng-selected="$last"
              class="form-control"
              ng-options="tag as tag.text for tag in vm.filteredTags track by tag.id"
              ng-model="vm.selectedTag"></select>
      <button ng-click="vm.setTag()" ng-disabled="vm.filteredTags[0]" class="btn btn-default">Add Tag</button>
    </div>
  </div>
</div>
